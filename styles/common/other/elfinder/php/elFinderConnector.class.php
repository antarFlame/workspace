<?php
 use UmiCms\Service;class elFinderConnector {protected $elFinder;protected $options = [];protected $header = 'Content-Type: text/html' ;public function __construct($vad326dd5dc572272297a6aef244101ea) {$this->elFinder = $vad326dd5dc572272297a6aef244101ea;}public function run() {$v8ba71fc6fec47bf0248338477f85f46d = $_SERVER['REQUEST_METHOD'] == 'POST';$v25d902c24283ab8cfbac54dfa101ad31    = $_SERVER['REQUEST_METHOD'] == 'POST' ? $_POST : $_GET;$vdfff0a7fa1a55c8c1a4966c19f6da452    = isset($v25d902c24283ab8cfbac54dfa101ad31['cmd']) ? $v25d902c24283ab8cfbac54dfa101ad31['cmd'] : '';$args   = [];if (!function_exists('json_encode')) {$vcb5e100e5a9a3e7f6d1fd97512215282 = $this->elFinder->error(elFinder::ERROR_CONF, elFinder::ERROR_CONF_NO_JSON);$this->output(['error' => '{"error":["'.implode('","', $vcb5e100e5a9a3e7f6d1fd97512215282).'"]}', 'raw' => true]);}if (!$this->elFinder->loaded()) {$this->output(['error' => $this->elFinder->error(elFinder::ERROR_CONF, elFinder::ERROR_CONF_NO_VOL)]);}if (!$vdfff0a7fa1a55c8c1a4966c19f6da452 && $v8ba71fc6fec47bf0248338477f85f46d) {$this->output(['added' => [], 'warning' => $this->elFinder->error(elFinder::ERROR_UPLOAD_COMMON, elFinder::ERROR_UPLOAD_FILES_SIZE), 'header' => 'Content-Type: text/html']);}if (!$this->elFinder->commandExists($vdfff0a7fa1a55c8c1a4966c19f6da452)) {$this->output(['error' => $this->elFinder->error(elFinder::ERROR_UNKNOWN_CMD)]);}foreach ($this->elFinder->commandArgsList($vdfff0a7fa1a55c8c1a4966c19f6da452) as $vb068931cc450442b63f5b3d276ea4297 => $vab4d0a658aef644a039b90c2067b45c0) {$v61dd86c2dc75c3f569ec619bd283a33f = $vb068931cc450442b63f5b3d276ea4297 == 'FILES'    ? $_FILES    : (isset($v25d902c24283ab8cfbac54dfa101ad31[$vb068931cc450442b63f5b3d276ea4297]) ? $v25d902c24283ab8cfbac54dfa101ad31[$vb068931cc450442b63f5b3d276ea4297] : '');if (!is_array($v61dd86c2dc75c3f569ec619bd283a33f)) {$v61dd86c2dc75c3f569ec619bd283a33f = trim($v61dd86c2dc75c3f569ec619bd283a33f);}if ($vab4d0a658aef644a039b90c2067b45c0 && empty($v61dd86c2dc75c3f569ec619bd283a33f)) {$this->output(['error' => $this->elFinder->error(elFinder::ERROR_INV_PARAMS, $vdfff0a7fa1a55c8c1a4966c19f6da452)]);}$args[$vb068931cc450442b63f5b3d276ea4297] = $v61dd86c2dc75c3f569ec619bd283a33f;}$args['debug'] = isset($v25d902c24283ab8cfbac54dfa101ad31['debug']) ? (bool) $v25d902c24283ab8cfbac54dfa101ad31['debug'] : false;$this->output($this->elFinder->exec($vdfff0a7fa1a55c8c1a4966c19f6da452, $args));}protected function output(array $v8d777f385d3dfec8815d20f7496026dc) {$va9c82692957f6b9ab0f61d663e20f8fb = isset($v8d777f385d3dfec8815d20f7496026dc['header']) ? $v8d777f385d3dfec8815d20f7496026dc['header'] : 'Content-Type: text/html; charset=utf-8';unset($v8d777f385d3dfec8815d20f7496026dc['header']);$v7f2db423a49b305459147332fb01cf87 = Service::Response()   ->getCurrentBuffer();$v7f2db423a49b305459147332fb01cf87->clear();@ob_end_clean();if ($va9c82692957f6b9ab0f61d663e20f8fb) {$va9c82692957f6b9ab0f61d663e20f8fb = (array) $va9c82692957f6b9ab0f61d663e20f8fb;foreach ($va9c82692957f6b9ab0f61d663e20f8fb as $v099fb995346f31c749f6e40db0f395e3) {list($vb068931cc450442b63f5b3d276ea4297, $v2063c1608d6e0baf80249c42e2be5804) = explode(':', $v099fb995346f31c749f6e40db0f395e3);$v7f2db423a49b305459147332fb01cf87->setHeader(trim($vb068931cc450442b63f5b3d276ea4297), trim($v2063c1608d6e0baf80249c42e2be5804));}}if (isset($v8d777f385d3dfec8815d20f7496026dc['pointer'])) {rewind($v8d777f385d3dfec8815d20f7496026dc['pointer']);fpassthru($v8d777f385d3dfec8815d20f7496026dc['pointer']);if (!empty($v8d777f385d3dfec8815d20f7496026dc['volume'])) {$v8d777f385d3dfec8815d20f7496026dc['volume']->close($v8d777f385d3dfec8815d20f7496026dc['pointer'], $v8d777f385d3dfec8815d20f7496026dc['info']['hash']);}$v7f2db423a49b305459147332fb01cf87->end();}if (!empty($v8d777f385d3dfec8815d20f7496026dc['raw']) && !empty($v8d777f385d3dfec8815d20f7496026dc['error'])) {$v7f2db423a49b305459147332fb01cf87->push($v8d777f385d3dfec8815d20f7496026dc['error']);}else {$v7f2db423a49b305459147332fb01cf87->push(json_encode($v8d777f385d3dfec8815d20f7496026dc));}$v7f2db423a49b305459147332fb01cf87->end();}}